<!DOCTYPE html>
<html lang="zh">
<head>
    <title>工作负载访问方式汇总表</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
          integrity="sha256-93wNFzm2GO3EoByj9rKZCwGjAJAwr0nujPaOgwUt8ZQ=" crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"
          integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous"/>
</head>
<body>
<div class="container">
    <div class="row mt-4">
        <div class="col-md-12">
            <h2>工作负载访问方式汇总表</h2>
            <p>生成时间: {{.GeneratedAt}}</p>
        </div>
    </div>
    <div class="row mt-2">
        <div class="col-md-12">
            <ul class="nav nav-tabs" id="cluster-tab-list" role="tablist">
                {{range $index, $cluster := .Clusters}}
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="tab-link-cluster-{{$index}}" data-toggle="tab"
                           href="#tab-cluster-{{$index}}" role="tab"><b><i
                                        class="fa fa-cubes"></i>&nbsp;{{$cluster.Name}}</b>
                        </a>
                    </li>
                {{end}}
            </ul>
            <div class="tab-content" id="cluster-tab-content">
                {{range $index, $cluster := .Clusters}}
                    <div class="tab-pane pb-2" id="tab-cluster-{{$index}}" role="tabpanel">
                        <div class="row pt-2">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h4 class="card-title"><i class="fa fa-file-o"></i>&nbsp;介绍</h4>
                                        <div class="card-text">
                                            {{$cluster.Description}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12 mt-2">
                                <div class="card">
                                    <div class="card-body">
                                        <h4 class="card-title"><i class="fa fa-server"></i>&nbsp;主机</h4>
                                        <table class="table card-text table-sm table-hover">
                                            <thead>
                                            <tr>
                                                <td>主机名</td>
                                                <td>IP</td>
                                                <td>是否可作为 NodePort 主机</td>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            {{range .Nodes}}
                                                <tr>
                                                    <td><b>{{.Name}}</b></td>
                                                    <td><b>{{.IP}}</b></td>
                                                    <td>
                                                        <b>
                                                            {{if .SuitableForNodePort}}
                                                                <i class="fa fa-check-circle"></i>&nbsp;是
                                                            {{end}}
                                                        </b>
                                                    </td>
                                                </tr>
                                            {{end}}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12 mt-2">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="card-text">
                                            注意，<code>项目</code> 是 Rancher 管理台提供的功能，<code>命名空间</code> 才是 Kubernetes
                                            的原生概念，<code>项目</code> 只是对 <code>命名空间</code> 的 <b>分组展示</b>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {{range .Namespaces}}
                                {{if .Workloads }}
                                    <div class="col-md-12 mt-2">
                                        <div class="card text-white bg-primary">
                                            <div class="card-body">
                                                <h5 class="card-title card-text"><i
                                                            class="fa fa-folder"></i>&nbsp;命名空间：{{.Name}}</h5>
                                            </div>
                                        </div>
                                    </div>
                                    {{range .Workloads}}
                                        <div class="col-md-12 mt-2">
                                            <div class="card">
                                                <div class="card-header">
                                                    <h5><i class="fa fa-cube"></i>&nbsp;<span
                                                                class="text-muted">{{.Namespace}}</span>&nbsp;/&nbsp;{{.Name}}
                                                        &nbsp;<small
                                                                class="text-muted">({{.Kind}}，{{.Replicas}}个副本)</small>
                                                    </h5>
                                                </div>
                                                <ul class="list-group list-group-flush">
                                                    {{if .Endpoints}}
                                                        {{range .Endpoints}}
                                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                            <span>
                                                                <b>{{.Kind}}</b>
                                                                <br/>
                                                                主机: <code>{{.Address}}</code>
                                                                <br/>
                                                                端口: <code>{{if .Port}}{{.Port}}{{else}}任意{{end}}</code>
                                                            </span>
                                                                <span class="badge badge-{{.AccessColor}} badge-pill">{{.Access}}</span>
                                                            </li>
                                                        {{end}}
                                                    {{else}}
                                                        <li class="list-group-item d-flex justify-content-between align-items-center text-muted">
                                                            无
                                                        </li>
                                                    {{end}}
                                                </ul>
                                            </div>
                                        </div>
                                    {{end}}
                                {{end}}
                            {{end}}
                        </div>
                    </div>
                {{end}}
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
        integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs="
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha256-jXCJJT3KKcnNjZ3rfsabCj1EX4j2omR4xxm+H5CtywE="
        crossorigin="anonymous"></script>
<script>
    $(function () {
        $("#tab-link-cluster-0").click();
    });
</script>
</body>
</html>